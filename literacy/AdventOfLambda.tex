%% employing the CTeX for better localization
%% `fandol` is also the default font set,
%%   it has trouble in displaying rarely used characters
%% the `ctexbook` documentclass doesn't provide `openany`
\usepackage[heading = true, fontset = macnew]{ctex}
\usepackage[a4paper, left=24mm, top=32mm]{geometry}

\ctexset{
   chapter/name = {第, 天},
   chapter/number = \chinese{chapter},
   section/name = {第, 幕},
   section/number = \chinese{section},
   section/format = \Large\bfseries,
   subsection/name = {第, 场},
   subsection/number = \chinese{subsection},
   subsubsection/name = {第, 镜},
   subsubsection/number = \chinese{subsubsection}
}

\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

\usepackage{indentfirst}
\setlength{\parindent}{2em}

\newcommand{\aocStory}[2]{
   \begin{tcolorbox}
   [enhanced, breakable,
      sharp corners=uphill, arc=2em,
      coltext=Silver, colframe=GhostWhite,
      colback=Black, colbacktitle=MidnightBlue,
      attach boxed title to top right={ xshift=-1.618em, yshift=-2mm },
      drop fuzzy shadow,
      title={#1}]
   #2
   \end{tcolorbox}}

\newtcbox{\aocEmph}[1][GhostWhite]{
   on line, nobeforeafter,
   arc=0pt, outer arc=0pt, size=tight,
   coltext=GhostWhite, colframe=#1, colback=Black!64!#1,
   boxsep=1pt, boxrule=0pt }

\newtcbox{\aocQuestion}[1][Gold]{
   on line, nobeforeafter,
   arc=0pt, outer arc=0pt, size=tight,
   coltext=GhostWhite, colframe=#1, colback=Black!75!#1,
   boxsep=0pt, left=1pt, right=1pt, top=2pt, bottom=2pt,
   boxrule=0pt, bottomrule=1pt, toprule=1pt }

%% for typesetting footnote as sidenote
\usepackage[footnote]{snotez}
\setsidenotes{
   text-mark-format=\textsuperscript{\normalfont#1},
   note-mark-format=#1:,
   note-mark-sep=\enskip
}
